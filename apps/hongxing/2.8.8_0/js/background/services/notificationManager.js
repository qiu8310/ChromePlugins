(function(){var t,n;t=["angular","core/services/storage","core/services/pageUtils","core/services/timeUtils","background/module","background/services/track"],n=function(t){var notificationManager;return notificationManager=function($rootScope,$translate,storage,server,timeUtils,pageUtils,track,ROLES,SERVER){var t,n,e,i;return chrome.notifications?(e={},t=function(){return server.on("notification",function(t){return chrome.notifications.create("",t.option,function(n){return e[n]=t}),track.event("notification",t.type,"show")}),chrome.notifications.onClicked.addListener(function(t){var n;return(n=e[t])?(pageUtils.openUrl("options"===n.url?"options.html":n.url),track.event("notification",n.type,"click")):void 0}),chrome.notifications.onButtonClicked.addListener(function(t,n){var i,o;return(o=e[t])?(i=o.options.buttons[n].title,"Please Renew VIP"===o.type&&storage.set("disableNotifyRenewVIP",!0),track.event("notification",o.type,"button-click:"+i)):void 0}),server.on("profile",function(){return setTimeout(function(){var t,e,o;if((null!=(t=$rootScope.user)?t.role:void 0)===ROLES.USER){if(null!=(e=$rootScope.user)&&null!=(o=e.profile)?o.until:void 0){if(storage.get("disableNotifyRenewVIP"))return;return i()}return n()}})})},n=function(){var t,n,i;return t={options:{title:$translate.instant("notifications.create_vip.title"),message:$translate.instant("notifications.create_vip.message"),contextMessage:$translate.instant("notifications.create_vip.contextMessage"),type:"basic",iconUrl:"img/logo.png"},type:"Please Create VIP",url:"https://"+SERVER+"/pay/index?name="+(null!=(n=$rootScope.user)&&null!=(i=n.profile)?i.name:void 0)},chrome.notifications.create("notifyCreateVIP",t.options,function(n){return e[n]=t}),track.event("notification",t.type,"show")},i=function(){var t,n,i;return t={options:{title:$translate.instant("notifications.renew_vip.title"),message:$translate.instant("notifications.renew_vip.message"),contextMessage:$translate.instant("notifications.renew_vip.contextMessage"),buttons:[{title:$translate.instant("notifications.renew_vip.button_title")}],type:"basic",iconUrl:"img/logo.png"},type:"Please Renew VIP",url:"https://"+SERVER+"/pay/index?name="+(null!=(n=$rootScope.user)&&null!=(i=n.profile)?i.name:void 0)},chrome.notifications.create("notifyRenewVIP",t.options,function(n){return e[n]=t}),track.event("notification",t.type,"show")},t(),this):this},t.module("background").service("notificationManager",notificationManager)},define(t,n)}).call(this);